let cmn={},ssd={post:[]},IS_HISTORY_API=(cmn.saveFormData=t=>{var s=document.querySelector(t);if(s){s=new FormData(s);let e={};s.forEach((t,s)=>{e[s]=t}),sessionStorage.setItem(t,JSON.stringify(e))}},cmn.loadFormData=t=>{let a=document.querySelector(t);if(a){t=sessionStorage.getItem(t);if(t){let e=JSON.parse(t);Object.keys(e).forEach(s=>{var t=a.querySelector(`[name="${s}"]`);t&&("checkbox"===t.type||"radio"===t.type?a.querySelectorAll(`[name="${s}"]`).forEach(t=>{t.checked=t.value===e[s]}):"SELECT"===t.tagName&&Array.isArray(e[s])?Array.from(t.options).forEach(t=>{t.selected=e[s].includes(t.value)}):t.value=e[s])})}}},cmn.getAgeAtThatTime=(t,s="1975-07-09")=>{let e=t,a=s,o={},n=new Date,i=n.getFullYear(),r=n.getMonth()+1,l=n.getDate(),c;return e=e.replace(/-/g,""),a=a.replace(/-/g,""),r<10&&(r="0"+r),l<10&&(l="0"+l),c=i+""+r+l,0<e-a&&(o.age=Math.floor((e-a)/1e4),o.is_same=Math.floor((c-a)/1e4)===o.age),o},cmn.getDir=t=>{let s=t.split("/").filter(Boolean),e={};return 0===s.length?e.level1="home":s.forEach((t,s)=>{e["level"+(s+1)]=t}),e},cmn.getNrToBr=(t="")=>t=(t=(t=t.replace(/\r\n/g,"<br>")).replace(/\r/g,"<br>")).replace(/\n/g,"<br>"),cmn.getParam=t=>{let s=t||location.href,e=[],a={},o;for(o in s=1<s.split("?").length?s.split("?")[1]:s,e=s.split("&")){var n=e[o].split("=");2==n.length&&""!=n[1].trim()&&(a[n[0]]=n[1])}return a},history&&history.pushState&&void 0!==history.state),IS_HISTORY_PUSH=!1,CURRENT_TIME=(cmn.historyPushState=(t,s,e)=>{IS_HISTORY_API&&(history.pushState(t,s,e),IS_HISTORY_PUSH=!0)},cmn.historySet=s=>{IS_HISTORY_API&&$(window).on("popstate",function(t){t=t.originalEvent?.state||null;s&&s(t)})},$(document).on("mouseenter","a, button",function(){$(this).addClass("hover")}),$(document).on("mouseleave","a, button",function(){$(this).removeClass("hover")}),cmn.htmlEntityDecode=t=>{var s=document.createElement("textarea");return s.innerHTML=t,s.value},cmn.htmlEscape=(t="")=>{var s=document.createElement("div");return s.textContent=t,s.innerHTML},cmn.loadHtml=async(t="")=>{if(""===t.trim())return{status:"fail",message:"ファイル名が指定されていません"};try{var s=await fetch(t,{method:"GET",headers:{"X-CSRF-Token":CSRF_TOKEN}});if(s.ok)return await s.text();throw new Error("HTTPエラー: "+s.status)}catch(t){return""}},cmn.loadImg=t=>{$("img, .js-lazybg",t).each(function(){let t=$(this),s=t.attr("data-src"),e=t.attr("data-bg"),a;"string"==typeof s&&""!==s&&((a=new Image).onload=()=>{t.attr("src",s).removeAttr("data-src")},a.src=s),"string"==typeof e&&""!==e&&((a=new Image).onload=()=>{t.attr("style",`background-image:url(${e});`).removeAttr("data-bg")},a.src=e)})},cmn.loadJson=async(t="")=>{if(""===t.trim())return{status:"fail",message:"ファイル名が指定されていません"};try{var s=await fetch("/api/index.php",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":CSRF_TOKEN},body:JSON.stringify({filename:t})});return s.ok?await s.json():{status:"fail",message:"HTTPエラー: "+s.status}}catch(t){return{status:"fail",message:t.message||"不明なエラーが発生しました"}}},cmn.pageScroll=(t=1,s=300,e)=>($("html, body").stop(),$("html").animate({scrollTop:t},s),$("body").animate({scrollTop:t},s,function(){e&&e()}),!1),(new Date).getTime()),scroll=(cmn.removeSplash=()=>{var t=1500-Math.min((new Date).getTime()-CURRENT_TIME,1500);setTimeout(()=>{$(".js-splash").fadeOut(()=>{$(".js-splash").remove()})},t)},cmn.replaceTag=(t="")=>t.replace(/<[^>]*>/g,""),cmn.replaceUTF=(t="")=>t.replace(/u([\da-fA-F]{4})/g,"&#x$1;"),{}),IS_LOCALSTORAGE=(scroll.is_touch=!!("ontouchstart"in window&&"ontouchend"in window||navigator.msPointerEnabled||0<navigator.maxTouchPoints),scroll.eventstart=scroll.is_touch?"touchstart":"mousedown",scroll.eventmove=scroll.is_touch?"touchmove":"mousemove",scroll.eventend=scroll.is_touch?"touchend":"mouseup",scroll.isNumber=(t="")=>/^[0-9]+$/.test(t),(()=>{let t=new $.Event("resizestop"),s;$(window).on("resize",()=>{s&&clearTimeout(s),s=setTimeout(function(){$(window).trigger(t)},300)})})(),scroll.show=(e=".scroll",a={})=>{let o=$(e),t=$(".scroll__outer",o),n=$(".scroll__inner",o),i=$(".scroll__content",o),s=$(".scroll__bar",o);if(scroll.is_touch)return t.width("").height(""),!1;if(0===o.length||0===t.length||0===n.length||0===i.length)return!1;let r=a.direction||"horizontal",l="horizontal"===r,c="horizontal"===r?"left":"top",m="horizontal"===r?"width":"height",p="horizontal"===r?"height":"width",d="horizontal"===r?"margin-top":"margin-left",h="";a.bg&&(h+=e+" .scroll__bar::after{background:"+a.bg+"}",delete a.bg),a.color&&(h+=e+" .scroll__bar span::after{background:"+a.color+"}",delete a.color),a.size&&scroll.isNumber(a.size)&&(h+=e+" .scroll__bar span::after{"+p+":"+Math.min(a.size,20)+"px;"+d+": "+Math.min(a.size,20)/2*-1+"px}",delete a.size),a.bg_size&&scroll.isNumber(a.size)&&(h+=e+" .scroll__bar::after{"+p+":"+Math.min(a.bg_size,20)+"px;"+d+": "+Math.min(a.bg_size,20)/2*-1+"px}",delete a.bg_size),""!=h&&$("head").append("<style>"+h+"</style>"),n.css({overflow:"hidden"});var u=i[0].scrollWidth,g=i[0].scrollHeight;let f=l?o.width():o.height(),_=l?u:g;if(!(1<=Math.abs(f-_)&&1<_-f))return 0<s.length&&s.hide(),!1;s.show(),n.css({overflow:"auto"});let b=!1,v=0,w=0,y=0,S,j=0,T=0,k=0,P=!1;f-=a.padding||0;n.on("scroll",()=>{if(b)return!1;var t=l?i.position().left:i.position().top;let s=Math.ceil(Math.abs(t)/_*100);100<s+T&&(s=100-T),C.css(c,s+"%")}),$(window).on("resize",()=>{P=!0}),$(window).on("resizestop",()=>{var t=$(".scroll__bar-control",o),s=l?t.width():t.height();S=l?window.innerWidth:window.innerHeight,y!=S&&(scroll.show(e,a),0<t.length&&(j=f-s),P=!1,y=S)}),0===s.length&&(o.append(`
      <div class="scroll__bar scroll__bar--${r}">
        <span class="scroll__bar-control"></span>
      </div>
    `),s=$(".scroll__bar",o),a.padding)&&s.css(m,"calc(100% - "+a.padding+"px)").css(c,a.padding/2+"px");let C=$(".scroll__bar-control",o);l?(t.height(g),n.height(g+30)):(t.width(u),n.width(u+30)),T=Math.ceil(f/_*100),k=l?(C.width(T+"%"),C.width()):(C.height(T+"%"),C.height()),j||(j=f-k,(()=>{let s;C.on(scroll.eventstart,function(t){b=!0,s=l?i.position().left:i.position().top,v=l?t.pageX:t.pageY,w=Math.floor(Math.abs(s)/_*f)}),$(document).on(scroll.eventmove,function(e){if(b&&!P){e=(l?e.pageX:e.pageY)-v,e=w+e;let t=0,s;e=Math.max(0,e),e=Math.min(Math.ceil(j),e),t=Math.ceil(e/f*100),s=_*(t/100),100<t+T&&(t=100-T),C.css(c,t+"%"),l?n.scrollLeft(s):n.scrollTop(s)}}),$(document).on(scroll.eventend,function(){b=!1})})())},cmn.setScriptFromText=t=>{t=document.querySelector(t);t&&t.querySelectorAll("script").forEach(t=>{var s=document.createElement("script");t.src?s.src=t.src:s.textContent=t.textContent,document.body.appendChild(s),t.remove()})},cmn.shuffleArray=(t=[])=>{let s,e;for(s=t.length;1<s;s--)e=Math.floor(Math.random()*s),[t[e],t[s-1]]=[t[s-1],t[e]];return t},cmn.sticky=(t="",s,e)=>{let a=document.querySelector(t);if(""===t.trim()||!a||"function"!=typeof s||"function"!=typeof e)return!1;let o=a.getBoundingClientRect().top;window.addEventListener("scroll",()=>{var t=a.getBoundingClientRect().top;t===o?s():o,o=t})},"localStorage"in window&&null!==window.localStorage),IS_SESSIONSTORAGE="sessionStorage"in window&&null!==window.sessionStorage;cmn.storageLS=(s,t)=>{let e=null;if(IS_LOCALSTORAGE&&void 0!==s)if(void 0!==t)localStorage[s]="object"==typeof t?JSON.stringify(t):t;else try{e=new Function("return "+localStorage[s])()}catch(t){e=localStorage[s]}return e},cmn.storageDelLS=t=>{localStorage.removeItem(t)},cmn.storageSS=(s,t)=>{let e=null;if(IS_SESSIONSTORAGE&&void 0!==s)if(void 0!==t)sessionStorage[s]="object"==typeof t?JSON.stringify(t):t;else try{e=new Function("return "+sessionStorage[s])()}catch(t){e=sessionStorage[s]}return e},cmn.storageDelSS=t=>{sessionStorage.removeItem(t)},$(()=>{let c=!1;$(document).on("click",".js-comment-submit",async function(){let t=$(this),s=t.closest(".js-form-comment"),e=$('[name="comment"]',s),a=$('[name="author"]',s),o=$(".js-comment-notification",s),n=$(".js-comment-inner"),i=$(".js-comment-list");$('[name="comment_post_ID"]',s).val();var r=new FormData(s[0]),r=Object.fromEntries(r.entries());if(e.on("input",()=>{o.removeClass("caution").hide()}),!c){if(""===e.val().trim())return o.addClass("caution").html("コメントが入力されていることをご確認の上、もう一度お試しください。").show(),!1;c=!0,t.html('<span class="animation-blinker">送信中...</span>');var l,r=await(await fetch("/assets/ajax/post-comment.php",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":CSRF_TOKEN},body:JSON.stringify(r)})).text();"success"===r?(o.removeClass("caution").html("コメントありがとうございます！").show(),l=`
          <div class="post-comment__unit">
            <div class="post-comment__unit-inner">
              ${cmn.getNrToBr(e.val().trim().replace(/</g,"＜").replace(/>/g,"＞"))}
              <div class="post-comment__unit-info">
                <span class="post-comment__unit-name">${cmn.getNrToBr(a.val().trim().replace(/</g,"＜").replace(/>/g,"＞"))||"(匿名)"}</span>
                <time class="post-comment__unit-time">now</time>
              </div>
            </div>
          </div>
        `,0===i.length&&(n.append('<div class="post-comment__list js-comment-list"></div>'),i=$(".js-comment-list")),0<$(".post-comment__unit",i).length?$(".post-comment__unit:first-child",i).before(l):i.append(l),e.val(""),a.val(""),console.log(ssd.post)):(console.log(r),o.addClass("caution").html("コメント送信できませんでした。恐れ入りますが、もう一度お試しください。").show()),c=!1,t.html("コメントする")}return!1})}),ssd.changePage=async(g={},f)=>{let _=$(".js-article-inner"),b=$(".js-loading");_.animate({top:-10,opacity:0},350,async function(){$(window).scrollTop(0),b.show(),g.path||(g.path="404");var t="https://simplesimples.com"+g.path,s=g.path.replace(/^\/|\/$/g,"").split("/"),e={};let a="シンプルシンプルデザイン",o="",n="",i,r,l="",c=!1,m=!1,p=!1,d=!1;switch(s[0]){case"":d=!0,a="",o="",r=await fetch("/assets/include/pages/home.php"),l=await r.text();break;case"blog":case"moviereview":a="個人ブログは引越ししました | "+a,o="個人ブログは別ドメインに引っ越ししました。ぜひ、引っ越し先をご覧ください。",r=await fetch("/assets/include/pages/move.php"),l=await r.text();break;case"service":a="サービス | "+a,o="",r=await fetch(`/assets/include/pages/${s[0]}.php`),l=await r.text();break;case"about":a="事業内容 | "+a,o="",r=await fetch(`/assets/include/pages/${s[0]}.php`),l=await r.text();break;case"contact":p=!0,a="お問い合わせ | "+a,o="",r=await fetch(`/assets/include/pages/${s[0]}.php`),l=await r.text();break;case"privacy":a="プライバシーポリシー | "+a,o="",r=await fetch(`/assets/include/pages/${s[0]}.php`),l=await r.text();break;case"post":a="制作ブログ | "+a,o="Web制作や映像制作を主軸とした備忘録です。",n="/assets/images/post-bg-searchbox.png",r=await fetch(`/assets/include/pages/${s[0]}.php`),l=await r.text();break;case"search":var h,u=cmn.getParam(location.search).q;u?(u=decodeURIComponent(u),h=0<(h=(r=await ssd.loadPostSearch(u)).count||0)?h+"件見つかりました。":"見つかりませんでした。",u=cmn.htmlEscape(u),a=`「${u}」の検索結果 | 制作ブログ | `+a,o=`制作ブログ内で「${u}」を含む記事は、`+h,n="/assets/images/post-bg-searchbox.png",l=ssd.setPostListSearch(r.ids||[],o),l=ssd.htmlSeachForm(u)+l):c=!0;break;case"web":case"video":case"overview":let t="";"web"===s[0]&&s[3]?t=s[3]:"web"!=s[0]&&s[2]&&(t=s[2]),t?(m=!0,t=decodeURIComponent(t),(h=ssd.getPostData(t))&&(a=h.title+" | "+a,o=h.description,n=h.img,l=await ssd.getPostHtml(h.id))&&""!=l?i={id:h.id,html:l}:c=!0):(a=" | "+a,o="",n="",l=ssd.setPostCategory(s[s.length-1])),l=ssd.htmlSeachForm()+l;break;default:c=!0}if(ssd.loading_page!=g.path)return console.error("Diff Page",ssd.loading_page,g.path),!1;switch(c&&(a="表示できませんでした | "+a,o="",r=await fetch("/assets/include/pages/system.php"),l=await r.text()),$("title").html(a),$('meta[name="description"]').attr("content",o),$('meta[property="og:image"]').attr("content",n),$('link[rel="canonical"]').attr("href",t),$("body").attr("data-menu","hide").attr("data-page",s[0]||"home"),b.hide(),_.html(l),cmn.loadImg(_),_.animate({top:0,opacity:1},350),!0){case m:hljs.highlightAll(),ssd.setPostLink(),cmn.setScriptFromText(".js-post-content");break;case d:ssd.setBusinessquotes();break;case p:cmn.loadFormData(".js-form-contact")}f&&g.path!=ssd.last_history&&(ssd.last_history=g.path,e.path=g.path,i&&(e.data=i),cmn.historyPushState(e,"",g.path)),ssd.is_delete_splash||(ssd.is_delete_splash=!0,cmn.removeSplash())})},$(()=>{let c=!1,m=t=>{$('.js-form-contact button[type="button"]').before('<p class="contact__error js-contact-error">'+t+"</p>")};$(document).on("click",'.js-form-contact button[type="button"]',async function(){let t=$(this),s=t.closest(".js-form-contact"),a=$(".js-contact-error",s),o=$(".js-contact-success",s),n=$(".js-contact-success-hide",s);if($(".js-link-contact-noreply",s).on("click",()=>(n.toggle(),!1)),!c){a.remove(),o.hide();var i=new FormData(s.get(0));let e={};if(i.forEach((t,s)=>{e[s]=t}),""===e.name.trim())return m("お名前を入力してください。"),!1;if(!/\S+@\S+\.\S+/.test(e.email))return m("メールアドレスを入力してください。"),!1;if(""===e.content.trim())return m("お問い合わせ内容を入力してください。"),!1;c=!0,t.html('<span class="animation-blinker">送信中...</span>');var i=e.email,r=`
<p>【こちらは自動返信メールです】</p>
<p>このたびは、数ある同業社の中から、シンプルシンプルデザインにお問い合わせいただき、誠にありがとうございます。<br>内容を確認させていただいた後、3営業日以内に担当者からご連絡いたします。<br>申し訳ありませんが、営業メールには返信致しかねますので予めご了承くださいませ。</p>
<p>
<strong>お問い合わせ内容</strong><br>
${e.contact.trim()}
</p>
<p>
<strong>会社名</strong><br>
${e.company.trim()}
</p>
<p>
<strong>お名前</strong><br>
${e.name.trim()}
</p>
<p>
<strong>メールアドレス</strong><br>
${e.email}
</p>
<p>
<strong>お問い合わせ内容詳細</strong><br>
${e.content.trim()}
</p>
            `,l=`
【こちらは自動返信メールです】


このたびは、数ある同業社の中から、シンプルシンプルデザインにお問い合わせいただき、誠にありがとうございます。
内容を確認させていただいた後、3営業日以内に担当者からご連絡いたします。
申し訳ありませんが、営業メールには返信致しかねますので予めご了承くださいませ。


お問い合わせ内容

${e.contact.trim()}


会社名

${e.company.trim()}


お名前

${e.name.trim()}


お問い合わせ内容詳細

${e.content.trim()}
            `,i=await(await fetch("/assets/ajax/contact-form.php",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":CSRF_TOKEN},body:JSON.stringify({email:i,subject:"【シンプルシンプルデザイン】お問い合わせありがとうございます",body:r,altbody:l})})).json();if("fail"===i.status)switch(i.message){case"Reload_due_to_invalide_request":m("送信できませんでした。");break;case"Error Message body empty":m("入力不備により、送信できませんでした。")}else n.hide(),o.show(),$('[name="name"]').val(""),cmn.storageDelSS(".js-form-contact");c=!1,t.html("送信する")}return!1}),$(document).on("change",".js-form-contact input, .js-form-contact textarea, .js-form-contact select",()=>{cmn.saveFormData(".js-form-contact")})}),ssd.getPostData=(s="")=>ssd.list.find(t=>decodeURIComponent(t.slug.replace(/^"|"$/g,""))===s)||null,ssd.getPostHtml=async s=>{let t=ssd.post.find(t=>t.id==s);if(!t){if(!(t=await ssd.loadPost(s))?.content)return"TODO ネット切れてる場合";ssd.post.push(t)}var e=t?.image?`<figure class="post__mainvisual" style="background-image: url(${t.image});"></figure>`:"";let a=t?.acf?.update||"";a&&(n=a.split("-"),a=`(${n[0]}年${+n[1]}月${+n[2]}日更新)`);var o,n=encodeURIComponent("https://simplesimples.com"+t.link),i=encodeURIComponent(cmn.htmlEntityDecode(t.title)),r=encodeURIComponent("【シンプルシンプルデザイン】"),r=`
<ul class="sns-list post__sns-list">
  ${t?.acf?.github?`<li><a class="sns-github" href="${t.acf.github}" target="_blank"><span class="icon-github"></span></a></li>`:""}
  ${t?.acf?.youtube?`<li><a class="sns-youtube" href="${t.acf.youtube}" target="_blank"><span class="icon-youtube"></span></a></li>`:""}
  <li><a class="sns-twitter" href="${`https://x.com/share?url=${n}&text=`+i+r}" target="_blank"><span class="icon-x"></span></a></li>
  <li><a class="sns-facebook" href="${"https://www.facebook.com/sharer/sharer.php?u="+n}" target="_blank"><span class="icon-facebook"></span></a></li>
  <li><a class="sns-line" href="${`https://line.me/R/msg/text/?${r}${i} `+n}" target="_blank"><span class="icon-icon-line"></span></a></li>
</ul>
  `,i=t?.acf?.stylesheet?`<style>${t.acf.stylesheet}</style>`:"",n=t?.acf?.javascript?`<script>${t.acf.javascript}</script>`:"",l=0===t.comments.length?'<p class="post-comment__none js-comment-none">この記事の最初のコメントを書いてくれると嬉しいです！</p>':"";let c="";for(o of t.comments){let{author:t,content:s,date:e}=o;t=t.trim()||"(匿名)",s=(s=s.replace(/</g,"＜").replace(/>/g,"＞")).replace(/&lt;/g,"＜").replace(/&gt;/g,"＞"),s=cmn.getNrToBr(s),c+=`
<div class="post-comment__unit">
  <div class="post-comment__unit-inner">
    ${s}
    <div class="post-comment__unit-info">
      <span class="post-comment__unit-name">${t}</span>
      <time class="post-comment__unit-time">${e}</time>
    </div>
  </div>
</div>
    `}return c=0===t.comments.length?"":`<div class="post-comment__list js-comment-list">${c}</div>`,`
${i}
<main class="post js-post">
  ${e}
  <header class="post__header">

    <p class="post__datetime-and-category">
      <span class="post__datetime">
          <time datetime="${t.dateitme}">${t.date}</time>
          ${a}
      </span>
      <span class="post__category">${t.category_name}</span>
    </p>

    <h1 class="post__title">${t.title}</h1>
  </header>

  ${r}

  <div class="post-content post__content js-post-content">
    ${t.content}
  </div>

  ${r}

  <div class="post__comment">
    <aside class="post-comment js-comment">
      <div class="post-comment__inner js-comment-inner">
        <h1 class="post-comment__title">COMMENT</h1>
        <p class="post-comment__description js-post-comment__description">最後まで目を通していただき、ありがとうございます。この記事はいかがでしたか？</p>
        ${l}
        <div class="post-comment__form-outer">
          <form id="commentform" class="post-comment__form js-form-comment" method="post" onsubmit="return false;">
            <textarea name="comment"></textarea>
            <p class="post-comment__message js-comment-notification"><strong>コメント送信できませんでした。恐れ入りますが、コメントが入力されていることをご確認の上、もう一度「コメント送信」を選択してください。</strong></p>
            <div class="post-comment__info">
              <input class="post-comment__name" name="author" type="text" value="" placeholder="ニックネーム">
              <button class="post-comment__submit js-comment-submit" type="button">コメントする</button>
            </div>
            <input type="hidden" name="comment_post_ID" value="${t.id}">
            <input type="hidden" name="comment_parent" value="0" />
          </form>
        </div>
        ${c}
      </div>
    </aside>
  </div>
</main>
${n}
  `},ssd.htmlSeachForm=(t="")=>`
<form class="form-search js-form-search" action="/search/" method="get">
  <input type="text" name="q" value="${t}" placeholder="制作ブログ内を検索">
</form>
  `,ssd.loadPost=async(t="")=>{if(""===t)return{status:"fail",message:"投稿IDが指定されていません"};try{var s=await fetch("/api/post.php?post_id="+t,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":CSRF_TOKEN}});if(s.ok)return await s.json();throw new Error("HTTPエラー: "+s.status)}catch(t){return{status:"fail",message:t.message||"不明なエラーが発生しました"}}},ssd.loadPostSearch=async(t="")=>{if(""===t)return{status:"fail",message:"検索ワードが指定されていません"};try{var s=await fetch("/api/post-search.php?search_word="+t,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":CSRF_TOKEN}});if(s.ok)return await s.json();throw new Error("HTTPエラー: "+s.status)}catch(t){return{status:"fail",message:t.message||"不明なエラーが発生しました"}}},ssd.setBusinessquotes=t=>{var s=$(".js-businessquotes");t&&(ssd.businessquotes.num=ssd.businessquotes.num+1,ssd.businessquotes.num===ssd.businessquotes.data.length)&&(ssd.businessquotes.num=0),t=ssd.businessquotes.data[ssd.businessquotes.num],s.css({opacity:0}),$(".js-businessquotes-title").html(t.title),$(".js-businessquotes-name").html(t.acf.word_name),""===t.acf.word_business?$(".js-businessquotes-business").html("").hide():$(".js-businessquotes-business").html(t.acf.word_business).show(),s.animate({opacity:1},650)},ssd.setPostCategory=(s="")=>{let e=ssd.category.find(t=>t.slug==s),t=ssd.list.filter(t=>e.ids.includes(t.category_id)),a="",o="";for(list of t)o+=ssd.setPostListsUnit(list,"h2");return a+=`
<div class="post-category">
  <hgroup class="post-category__hgroup">
    <h1>${e.name}</h1>
    <p>${e.name}に関する記事は、${t.length}件あります。<br>${e.description}</p>
  </hgroup>
  <div class="post-category__content">
    <div class="post-list post-list--category">
      ${o}
    </div>
  </div>
</div>
  `},ssd.setPostLink=()=>{$(".js-post-content a").each(function(){let t=$(this),s=t.attr("href");s.match(/^mailto/)?(t.removeAttr("target"),0===$("img",t).length&&t.prepend('<span class="icon-mail linkmail"></span>')):s.match(/^\//)||s.match(/^https:\/\/simplesimples\.com/)||s.match(/^https:\/\/data\.simplesimples\.com/)?(s=s.replace("https://data.simplesimples.com",""),t.removeAttr("target").attr("href",s).addClass("js-link")):(t.attr("target","_blank").attr("rel","noopener noreferrer"),0==$("img",t).length&&t.append('<span class="icon-windows newwin"></span>'))})},ssd.setPostListSearch=(t,s)=>{let e,a="";if(0<t.length){e=t.split(",").map(t=>Number(t));for(list of e=ssd.list.filter(t=>e.includes(t.id)))a+=ssd.setPostListsUnit(list,"h2")}return`
<div class="search">
  <h1 class="search__title">${s}</h1>
  <div class="post-list post-list--search">
  ${a}
  </div>
</div>
  `},ssd.setPostLists15=()=>{let s="",t="",e="";for(let t=0;t<15;t++)s+=ssd.setPostListsUnit(ssd.list[t],"h4");for(list of ssd.list_popular)t+=ssd.setPostListsUnit(list,"h4");for(list of ssd.list_comment)e+=ssd.setPostListsUnit(list,"h4");$(".js-post-recenlty-lists").html(s),$(".js-post-popular-lists").html(t),$(".js-post-comment-lists").html(e),cmn.loadImg($(".js-post-recenlty-lists")),cmn.loadImg($(".js-post-popular-lists")),cmn.loadImg($(".js-post-comment-lists")),scroll.show(".js-scroll-post-recenlty"),scroll.show(".js-scroll-post-popular"),scroll.show(".js-scroll-post-comment")},ssd.setPostListsUnit=(t,s="h2")=>html=`
<article class="post-list-unit">
  <a class="js-link post-list-unit__link" href="${t.link}" data-postid="${t.id}">
    <figure class="post-list-unit__figure js-lazybg" data-bg="${t.img}"></figure>
    <div class="post-list-unit__content">
      <${s} class="post-list-unit__title">${t.title}</${s}>
      <p class="post-list-unit__description">${t.description}</p>
      <p class="post-list-unit__time-and-category">
        <time class="post-list-unit__time">${t.date}</time>
        <span class="post-list-unit__category">${t.category_name}</span>
      </p>
    </div>
  </a>
</article>
  `,$(()=>{cmn.storageDelSS(".js-form-contact");let e=location.pathname;cmn.historySet(t=>{t?(ssd.loading_page=t.path,ssd.changePage(t)):(ssd.loading_page=e,ssd.changePage({path:e}))}),Promise.all([cmn.loadJson("businessquotes.json"),cmn.loadJson("list.json"),cmn.loadJson("list-popular.json"),cmn.loadJson("list-comment.json"),cmn.loadJson("category.json"),cmn.loadHtml("/assets/include/post-nav.html")]).then(t=>{ssd.businessquotes={},ssd.businessquotes.data=t[0],ssd.businessquotes.data=cmn.shuffleArray(ssd.businessquotes.data),ssd.businessquotes.num=0,ssd.businessquotes.is_init=!1,ssd.list=t[1];var s=t[2]?.ids.split(",").map(t=>Number(t))||[],s=(ssd.list_popular=s.map(s=>ssd.list.find(t=>t.id===s)).filter(t=>void 0!==t),t[3]?.ids.split(",").map(t=>Number(t))||[]);ssd.list_comment=s.map(s=>ssd.list.find(t=>t.id===s)).filter(t=>void 0!==t),ssd.category=t[4],ssd.loading_page=e,ssd.changePage({path:e}),$(".js-post-nav").html(t[5]),ssd.setPostLists15()}).catch(t=>{console.error("Ohh, somthing happens...",t),ssd.loading_page="/system/",ssd.changePage({path:"/system/"}),cmn.removeSplash()})}),$(()=>{let e=$("body");$(".js-menu-link").on("click",()=>{var t=e.attr("data-menu"),s="show"===t?"hide":"show";return console.log(t),e.attr("data-menu",s),!1})}),$(document).on("click",".js-link",function(){var t=$(this).attr("href");return ssd.loading_page=t,ssd.changePage({path:t},!0),!1}),$(document).on("click",".js-link-businessquotes",()=>(ssd.setBusinessquotes(!0),!1)),$(document).on("input",".js-form-contact",()=>{cmn.saveFormData(".js-form-contact")});